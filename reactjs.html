<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- CSS -->
    <link rel=stylesheet href=css/master.css>

    <!-- Title -->
    <title>TinyWebApps.Com</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="pics/logo.png">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142497896-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-142497896-1');
    </script>
</head>

<body>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

<header>
    <nav class="navbar navbar-expand-xl navbar-dark bg-dark" style="background-color: #e3f2fd;">

        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="pics/logo.svg" width="64" height="64" alt="">
            </a>

            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="cat.html">Made By CatCanCode.Com</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="learn.html">Learn Programming</a>
                </li>
            </ul>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler"
                    aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#">For Students</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">For Workers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">For Farmers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">For Programmers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">For Artists</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">For Everyone</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Entertainment
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="#">News/Forum</a>
                            <a class="dropdown-item" href="#">Music</a>
                            <a class="dropdown-item" href="#">Video</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">Game</a>
                        </div>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                </ul>
            </div>

        </div>
    </nav>
</header>

<main>

    <div class="container">
        <h1>ReactJS Tips</h1>
        A collection of my tips for developing web apps with ReactJS framework.
        <br/>
        <br/>

        <div class="card">
            <div class="card-header">
                <h5>Migrating create-react-app project from JavaScript to TypeScript</h5>
                (Last Edit: 04 Jul 2019)
            </div>
            <div class="card-body">
                <p class="card-text text-justify">
                    Migrating your existing ReactJS project created by create-react-app from JavaScript to TypeScript is not as hard as it seems to be.
                    <br/><br/>
                    Firstly, you need to make sure that the version of the react-scripts in your project is at least 2.1.0 or higher.
                    This will simplify the migration process. You can find out what react-scripts version you are using in your project
                    by checking the corresponding item in package.json file.
                    If the react-scripts' version is outdated, you can update it using the instructions in this
                    <a href="https://facebook.github.io/create-react-app/docs/updating-to-new-releases">link</a>.
                    <br/><br/>
                    The next step is to add TypeScript support to your project following the instruction in this
                    <a href="https://facebook.github.io/create-react-app/docs/adding-typescript">link</a>.
                    Then rename any JavaScript file to be a TypeScript file (e.g. src/index.js to src/index.tsx).
                    When you rebuild your project with at least one TypeScript file in it, the tsconfig.json file will be generated automatically.
                    <br/><br/>
                    Finally, you can convert other JavaScript files in your project into TypeScript files. I recommend to do this for one file at a time to
                    fix the compiling errors.
                    Normally, you can fix the import errors by installing new types for your packages (e.g.,  npm install --save @types/react-router for react-router).
                    You should also have a look at the minimum transition steps in this
                    <a href="https://github.com/microsoft/TypeScript-React-Conversion-Guide">link</a>. Although the instructions in the link is for generic ReactJS app not from
                    create-react-app, the minimum transition steps in it are still valid to have a look.
                    <br/><br/>
                    When you finish converting all the JavaScript files, you have successfully migrated your create-react-app project from JavaScript to TypeScript.
                    This will make your project more scalable and maintainable.
                </p>
            </div>
        </div>
        <hr>

        <div class="card">
            <div class="card-header">
                <h5>'Closing' a web application properly</h5>
                (Last Edit: 26 Jun 2019)
            </div>
            <div class="card-body">
                <p class="card-text text-justify">
                    For desktop applications, it is very common to have the options to close the application such as (X button or quit menu option).
                    'Closing' a web application is much more complicated than that. The action of closing a web app can be triggered through many
                    different ways such as closing the browser, closing the browser's tab, refreshing the page, or clicking the back button.
                    Although it is complicated, it is very important to handle the closing process of web app properly.
                    Because, not shutting down the web app properly leads to unexpected outcomes for the users such as not saved or
                    synchronized user data or unwanted behaviors relating to the authentication.
                    <br/><br/>
                    I have also recently noticed that the online banking system, such as ING bank, shows a confirm box to let users know that
                    they are logging out of the system whenever they try to navigate away from the website. This serves two purposes:
                    (1) it provides security for the user account; and (2) it provides the users with information that gives them the peace of mind.
                    <br/><br/>
                    Overall, it is important from many perspectives to properly handling the close action of the web applications. I will show you how to
                    handle the close option in the web apps that use the <a href="https://reactjs.org/">ReactJS framework</a> and the <a href="https://github.com/ReactTraining/react-router">react-router</a> library.
                    <br/><br/>
                    If you are clicking the back button to move between pages within the application (not back from the homepage to an external URL),
                    react-router provides the <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Prompt.md">Prompt component</a> that can handle this situation.
                    There are also options to use custom modals for the prompt, such as those in
                    <a href="https://medium.com/@michaelchan_13570/using-react-router-v4-prompt-with-custom-modal-component-ca839f5faf39">link1</a>
                    and <a href="https://www.npmjs.com/package/react-router-navigation-prompt">link2</a>
                    <br/><br/>
                    However, the Prompt component of the react-router library does not handle backing to an external URL nor closing the entire web page
                    (references: <a href="https://github.com/ReactTraining/react-router/issues/5875">link1</a>,
                    <a href="https://stackoverflow.com/questions/32841757/detecting-user-leaving-page-with-react-router">link2</a>).
                    <br/><br/>
                    I have written the sourcecode to handle closing the web application in many situations such as clicking back button, refreshing page, closing tab
                    or even closing the browser.
                    I use two JavaScript events on the window to implement this feature: <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onpopstate">onpopstate</a> and
                    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload">onbeforeunload</a>.
                    This code can be put in the main component of your ReactJS web app.
                    <br/>
                    <script src="https://gist.github.com/catcancode/d839e2f616ce96a7d13a9a24e4342ef5.js"></script>
                </p>
            </div>
        </div>
        <hr>
    </div>

</main>

<footer>
    <div class="container-fluid bg-info">
        <div class="container bg-info text-white">
            TinyWebApps.Com
            <br/>
            Centre Hub for Internet Applications
            <br/>
            Handcrafted by <a href="https://www.catcancode.com" style="color: #e3f2fd;">CatCanCode.Com</a>
            <br/>
            &copy; 2019 All Rights Reserved
            <br/>
            <a href="https://sites.google.com/view/catcancode-privacypolicy" style="color: #e3f2fd;">Privacy Policy</a>
        </div>
    </div>
</footer>

</body>

</html>
